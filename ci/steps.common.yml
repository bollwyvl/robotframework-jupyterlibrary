parameters:
  name: Linux

steps:
  - script: python -m scripts.lint
    displayName: Lint

  - script: python -m pip install . --no-deps --ignore-installed -vv
    displayName: Install

  - script: python -m scripts.atest
    displayName: Test

  - task: PublishTestResults@2
    displayName: Publish Test Results
    inputs:
      testResultsFiles: _artifacts/test_output/**/*.xunit.xml
    condition: always()

  - task: PublishBuildArtifacts@1
    displayName: Publish Robot Logs
    inputs:
      PathtoPublish: _artifacts/test_output
      ArtifactName: ${{ parameters.name }} tests
    condition: always()
